(function(g){if(!Array.prototype.indexOf)Array.prototype.indexOf=function(t){var s=this.length>>>0;var u=Number(arguments[1])||0;u=u<0?Math.ceil(u):Math.floor(u);if(u<0)u+=s;for(;u<s;u++)if(u in this&&this[u]===t)return u;return-1};var r=new Array;var h=0;var e=false;var q="";var c="";var o="";var k="";var m=0;var d=0;var a={onComplete:function(){},backgroundColor:"#000",barColor:"#fff",barHeight:1,percentage:false,deepSearch:true,completeAnimation:"fade",minimumTime:500,onLoadComplete:function(){if(a.completeAnimation==
"grow"){var t=500;var s=new Date;if(s.getTime()-d<a.minimumTime)t=a.minimumTime-(s.getTime()-d);g(o).stop().animate({width:"100%"},t,function(){g(this).animate({top:"0%",width:"100%",height:"100%"},500,function(){g(c).fadeOut(500,function(){g(this).remove();a.onComplete()})})})}else g(c).fadeOut(500,function(){g(c).remove();a.onComplete()})}};var f=function(){var s=new Date;d=s.getTime();i();j()};var i=function(){q=g("<div></div>").appendTo("body").css({display:"none",width:0,height:0,overflow:"hidden"});
for(var s=0;r.length>s;s++)g.ajax({url:r[s],type:"HEAD",success:function(t){if(!e){m++;b(this["url"])}}})};var b=function(s){var t=g("<img />").attr("src",s).bind("load",function(){l()}).appendTo(q)};var l=function(){h++;var s=h/m*100;g(o).stop().animate({width:s+"%",minWidth:s+"%"},200);if(a.percentage==true)g(k).text(Math.ceil(s)+"%");if(h==m)p()};var p=function(){g(q).remove();a.onLoadComplete();e=true};var j=function(){c=g("").css({width:"100%",height:"100%",backgroundColor:a.backgroundColor,
backgroundPosition:"fixed",position:"fixed",zIndex:666999,top:0,left:0}).appendTo("body");o=g("<div id='qLbar'></div>").css({height:a.barHeight+"px",marginTop:"-"+a.barHeight/2+"px",backgroundColor:a.barColor,width:"0%",position:"absolute",top:"50%"}).appendTo(c);if(a.percentage==true)k=g("<div id='qLpercentage'></div>").text("0%").css({height:"40px",width:"100px",position:"absolute",fontSize:"3em",top:"50%",left:"50%",marginTop:"-"+(59+a.barHeight)+"px",textAlign:"center",marginLeft:"-50px",color:a.barColor}).appendTo(c)};
var n=function(v){var t="";if(g(v).css("background-image")!="none")var t=g(v).css("background-image");else if(typeof g(v).attr("src")!="undefined"&&v.nodeName.toLowerCase()=="img")var t=g(v).attr("src");if(t.indexOf("gradient")==-1){t=t.replace(/url\(\"/g,"");t=t.replace(/url\(/g,"");t=t.replace(/\"\)/g,"");t=t.replace(/\)/g,"");var w=t.split(", ");for(var u=0;u<w.length;u++)if(w[u].length>0&&r.indexOf(w[u])==-1){var s="";if(g.browser.msie&&g.browser.version<9)s="?"+Math.floor(Math.random()*3E3);
r.push(w[u]+s)}}};g.fn.queryLoader2=function(s){if(s)g.extend(a,s);this.each(function(){n(this);if(a.deepSearch==true)g(this).find("*:not(script)").each(function(){n(this)})});f();return this}})(jQuery);
