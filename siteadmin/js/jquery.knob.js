$(function(){$.fn.knob=$.fn.dial=function(a){return this.each(function(){var n=$(this);n.css("box-shadow","0px 0px 0px #fff");n.css("-webkit-box-shadow","0px 0px 0px #fff");n.css("moz-box-shadow","0px 0px 0px #fff");if(n.data("dialed")){return n}n.data("dialed",true);var b=$.extend({min:n.data("min")||0,max:n.data("max")||100,cursor:n.data("cursor"),thickness:n.data("thickness")||0.3,width:n.data("width")||200,displayInput:n.data("displayinput")==null||n.data("displayinput"),fgColor:n.data("fgcolor")||"#87CEEB",bgColor:n.data("bgcolor")||"#EEEEEE",tickColor:n.data("tickColor")||n.data("fgcolor")||"#DDDDDD",ticks:n.data("ticks")||0,tickLength:n.data("tickLength")||0,tickWidth:n.data("tickWidth")||0.02,tickColorizeValues:n.data("tickColorizeValues")||true,readOnly:n.data("readonly"),skin:n.data("skin")||"default",draw:function(t,x,m,z){var u=1.5*Math.PI,s=u+t,c=m.width/2,p=c*m.thickness;z.clearRect(0,0,m.width,m.width);z.lineWidth=p;m.cursor&&(u=s-0.3)&&(s=s+0.3);var w=m.ticks;var y=m.tickLength;var q=m.tickWidth;for(tick=0;tick<w;tick++){z.beginPath();if(t>(((2*Math.PI)/w)*tick)&&m.tickColorizeValues){z.strokeStyle=m.fgColor}else{z.strokeStyle=m.tickColor}var k=(((2*Math.PI)/w)*tick)-(0.5*Math.PI);z.arc(c,c,c-p-y,k,k+q,false);z.stroke()}z.beginPath();z.strokeStyle=m.fgColor;z.arc(c,c,c-p,u,s,false);z.stroke();switch(m.skin){case"default":z.beginPath();z.strokeStyle=m.bgColor;z.arc(c,c,c-p,u,(x==m.min&&!m.cursor)?u+0.0001:s,true);z.stroke();break;case"tron":z.lineWidth=2;z.beginPath();z.strokeStyle=m.fgColor;z.arc(c,c,c-p+1+p*2/3,0,2*Math.PI,false);z.stroke();break}},change:function(c){},release:function(c,k){}},a);var l=$('<canvas width="'+b.width+'" height="'+b.width+'"></canvas>'),g=$("<div style=width:"+b.width+'px;display:inline;"></div>'),i;n.wrap(g).before(l);b.displayInput&&n.css({width:b.width/2+"px",position:"absolute","margin-top":(b.width*5/13)+"px","margin-left":"-"+3*b.width/4+"px","font-size":b.width/5+"px",border:"none",background:"none","font-family":"Arial","font-weight":"bold","text-align":"center",color:b.fgColor,padding:"0px","-webkit-appearance":"none"})||n.css({width:"0px",visibility:"hidden"});i=new Dial(l,b);i.onRelease=function(c){b.release(c,n)};i.val(parseInt(n.val())||0);i.onChange=function(c){n.val(c);b.change(c)};n.bind("change",function(c){i.val(n.val())});if(!b.readOnly){l.bind("mousedown touchstart",function(c){c.preventDefault();i.startDrag(c)}).bind("mousewheel DOMMouseScroll",mw=function(p){p.preventDefault();var m=p.originalEvent,k=m.detail||m.wheelDeltaX,c=m.detail||m.wheelDeltaY,q=parseInt(n.val())+(k>0||c>0?1:k<0||c<0?-1:0);i.val(q)});var h,e,o,d,f=1,j={37:-1,38:1,39:1,40:-1};n.bind("keydown",function(k){var c=k.keyCode;h=parseInt(String.fromCharCode(c));if(isNaN(h)){c!=13&&c!=8&&c!=189&&k.preventDefault();if($.inArray(c,[37,38,39,40])>-1){i.val(parseInt(n.val())+j[c]*f);d=function(){f<20&&f++};o=setTimeout(d,50);k.preventDefault()}}}).bind("keyup",function(c){if(isNaN(h)){if(o){clearTimeout(o);o=null;f=1;i.onRelease(n.val(),n)}else{if(c.keyCode==13){i.onRelease(n.val(),n)}}}else{(n.val()>b.max&&n.val(b.max))||(n.val()<b.min&&n.val(b.min))}}).bind("mousewheel DOMMouseScroll",mw)}else{n.attr("readonly","readonly")}}).parent()};Dial=function(e,b){var l=null,m=e[0].getContext("2d"),h=Math.PI*0.0001,j=2*Math.PI,k,i,g,f,d=this;this.onChange=function(){};this.onRelease=function(){};this.val=function(c){if(null!=c){c=Math.max(Math.min(c,b.max),b.min);if(l==c){return}l=c;this.onChange(c);h=(c-b.min)*j/(b.max-b.min);b.draw(h,c,b,m)}else{var a=h=Math.atan2(k-g,-(i-f-b.width/2));(h<0)&&(a=h+j);c=Math.round(a*(b.max-b.min)/j)+b.min;return(c>b.max)?b.max:c}};this.capture=function(a){switch(a.type){case"mousemove":case"mousedown":k=a.pageX;i=a.pageY;break;case"touchmove":case"touchstart":k=a.originalEvent.touches[0].pageX;i=a.originalEvent.touches[0].pageY;break}this.val(this.val())};this.startDrag=function(c){var a=e.position();g=a.left+(b.width/2);f=a.top;this.capture(c);$(document).bind("mousemove.dial touchmove.dial",function(n){d.capture(n)}).bind("mouseup.dial touchend.dial",function(){$(document).unbind("mousemove.dial touchmove.dial mouseup.dial touchend.dial");d.onRelease(l)})}}});